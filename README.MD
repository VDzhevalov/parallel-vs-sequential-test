# üì¶ parallel-vs-sequential-test

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –º—ñ—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∑–∞–ø—É—Å–∫—É UI-—Ç–µ—Å—Ç—ñ–≤ –Ω–∞ –±–∞–∑—ñ Selenide + JUNIT5 —É Podman —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é Selenium Grid, Allure Report —Ç–∞ CLI-–∫–µ—Ä—É–≤–∞–Ω–Ω—è.

---

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–∞–∫—ñ –æ—Å–Ω–æ–≤–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Ç–∞ –ø–∞–∫–µ—Ç–∏:

* `setup.remote` ‚Äî –∫–ª–∞—Å–∏ –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

    * Remote WebDriver
    * Selenide
    * Allure
    * –û–∫—Ä–µ–º–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–ª–∞—Å–∏ –¥–ª—è `@TestInstance(TestInstance.Lifecycle.PER_METHOD)` —ñ `@TestInstance(TestInstance.Lifecycle.PER_CLASS)`

* `datareader` ‚Äî –∫–ª–∞—Å–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –∑ CSV/JSON/—Ñ–∞–π–ª—ñ–≤. –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —É "FromFile"-—Ç–∞—Å–∫–∞—Ö.

* `resources/test-data/` ‚Äî —Ñ–∞–π–ª–∏ –∑ –≤—Ö—ñ–¥–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤, —è–∫—ñ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∑ —Ç–µ–≥–∞–º–∏ —Ç–∏–ø—É `FromFile`

```
parallel-vs-sequential-test/
‚îú‚îÄ‚îÄ .docker/
‚îÇ   ‚îú‚îÄ‚îÄ grid/                  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Selenium Grid —Ç–∞ CLI
‚îÇ   ‚îú‚îÄ‚îÄ tests/                 # Dockerfile –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ web/                   # Dockerfile –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Allure
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ cli.sh                 # –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –∫–µ—Ä—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ build.gradle               # Gradle-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ settings.gradle
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

–î–ª—è –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –º–∞—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ:

* [Podman](https://podman.io/) ‚Äî —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∏–π —Ä—É—à—ñ–π
* (–û–ø—Ü—ñ–π–Ω–æ) [podman-compose](https://github.com/containers/podman-compose) ‚Äî –¥–ª—è –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ `podman-compose.yml`

> –ë–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ–≥–æ Podman –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –Ω–µ–º–æ–∂–ª–∏–≤–∏–π

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

* –í—Å—Ç–∞–Ω–æ–≤–∏ [Podman](https://podman.io/)
* –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ `podman` —Ç–∞ `podman network` –ø—Ä–∞—Ü—é—é—Ç—å
* (–û–ø—Ü—ñ–π–Ω–æ) –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π `podman-compose`, —è–∫—â–æ —Ö–æ—á–µ—à –∑–∞–ø—É—Å–∫–∞—Ç–∏ —á–µ—Ä–µ–∑ YAML

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

> ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:
>
> * –ü–µ—Ä–µ–¥ –ø–µ—Ä—à–∏–º –∑–∞–ø—É—Å–∫–æ–º **–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö –¥–æ –ø—Ä–æ—î–∫—Ç—É** —É –∑–º—ñ–Ω–Ω—ñ–π `HOST_TEST_PROJECT_PATH`. –Ü–Ω–∞–∫—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ —Ç–µ—Å—Ç–∞–º–∏ **–Ω–µ –∑–º–æ–∂–µ –∑–º–æ–Ω—Ç—É–≤–∞—Ç–∏ –∫–æ–¥ —ñ –Ω–µ —Å—Ç–∞—Ä—Ç—É—î**.
>
> * –ó–º—ñ–Ω–Ω—É `HOST_WEB_REPORT_PATH` –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏ **—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤—ñ–¥–º–æ–≤–ª—è—î—Ç–µ—Å—å –≤—ñ–¥ named volume**. –£ —Ç–∞–∫–æ–º—É —Ä–∞–∑—ñ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `USE_NAMED_VOLUME=false`.

–í—Å—Ç–∞–Ω–æ–≤–∏ –∑–º—ñ–Ω–Ω—ñ —É `.docker/grid/.env`:

```env
TEST_IMAGE=selenide-compare-tests-image
WEB_IMAGE=allure-report-web-image
TEST_CONTAINER=selenide-compare-tests-server
WEB_CONTAINER=allure-web-server
VOLUME_NAME=grid_allure-results-volume
SELENIUM_HUB_URL=http://selenium-hub:4444/wd/hub
REPORT_PORT=8080
SELENIUM_PORT=4444
USE_NAMED_VOLUME=true
WEB_REPORT_TARGET_PATH=/app/build/allure-report
TEST_REPORT_TARGET_PATH=/app/allure-report
HOST_WEB_REPORT_PATH=/–∞–±—Å–æ–ª—é—Ç–Ω–∏–π/—à–ª—è—Ö/–¥–æ/allure-–∑–≤—ñ—Ç—ñ–≤
HOST_TEST_PROJECT_PATH=/–∞–±—Å–æ–ª—é—Ç–Ω–∏–π/—à–ª—è—Ö/–¥–æ/–ø—Ä–æ—î–∫—Ç—É
```

---

## üß™ –û—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑–∞–ø—É—Å–∫—É

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Å–ø–æ—Å–æ–±–∏ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

* üîπ –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `cli.sh` (—Ä—É—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑ Podman)
* üî∏ –ß–µ—Ä–µ–∑ `cli-composer.sh` (–∫–æ–º–ø–ª–µ–∫—Å–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑ podman-compose)

---

### üîπ CLI (—Ä—É—á–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ Podman)

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É: `./scripts/cli.sh`

### üîº –ó–∞–ø—É—Å–∫ —É—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏

```bash
./scripts/cli.sh run_all
```

### üîΩ –ó—É–ø–∏–Ω–∫–∞ –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏

```bash
./scripts/cli.sh down_all
```

### üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ

#### Grid (Hub + Chrome Nodes)

```bash
./scripts/cli.sh up-grid
./scripts/cli.sh down-grid
./scripts/cli.sh status-grid
```

#### Web (Allure Web Server)

```bash
./scripts/cli.sh web create
./scripts/cli.sh web run
./scripts/cli.sh web stop
```

#### Tests

```bash
./scripts/cli.sh tests create
./scripts/cli.sh tests run
./scripts/cli.sh tests stop
./scripts/cli.sh tests conn
```

#### Clean (–æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤)

```bash
./scripts/cli.sh clean all
```

---

### üî∏ CLI-COMPOSER (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ podman-compose)

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É: `./cli-composer.sh (–∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑ .docker/grid/ —ñ–Ω–∞–∫—à–µ –∫–æ–º–ø–æ—Å–µ—Ä –±—É–¥–µ —Å–≤–∞—Ä–∏—Ç–∏—Å—è)`

#### üîº –ó–∞–ø—É—Å–∫ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
cd .docker/grid/
```
```bash
./cli-composer.sh up
```

#### üîΩ –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
./cli-composer.sh down
```

#### üìã –î–æ—Å—Ç—É–ø–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ --profile):

* `tests` ‚Äî –∑–∞–ø—É—Å–∫ –ª–∏—à–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ + selenium grid
* `report` ‚Äî –∑–∞–ø—É—Å–∫ –ª–∏—à–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∑—ñ –∑–≤—ñ—Ç–æ–º
* `all` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) ‚Äî –∑–∞–ø—É—Å–∫ –ø–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

#### üîó –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
./cli-composer.sh conn <name>
```
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ç–µ—Å—Ç—ñ–≤:
```bash
./cli-composer.sh conn selenide-compare-tests-server
```

> ‚ùó –î–ª—è —Ä–æ–±–æ—Ç–∏ cli-composer –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π `podman-compose`

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –≤—Ä—É—á–Ω—É

### üîó –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑ —Ç–µ—Å—Ç–∞–º–∏:

```bash
./scripts/cli.sh tests conn
```

### üèÉ –ó–∞–ø—É—Å–∫ Gradle-—Ç–µ—Å—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
./gradlew <–Ω–∞–∑–≤–∞_—Ç–∞—Å–∫–∏>
```

### üìã –î–æ—Å—Ç—É–ø–Ω—ñ —Ç–∞—Å–∫–∏:

| –¢–∞—Å–∫–∞                       | –û–ø–∏—Å                                                        |
| --------------------------- |-------------------------------------------------------------|
| `oneByOnePMITests`          | PER\_METHOD Inline ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –¥–∞–Ω—ñ –≤ –∫–æ–¥—ñ                |
| `oneByOnePMFTests`          | PER\_METHOD FromFile ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—ñ–≤            |
| `oneByOnePCITests`          | PER\_CLASS Inline ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –¥–∞–Ω—ñ –≤ –∫–æ–¥—ñ                 |
| `oneByOnePCFTests`          | PER\_CLASS FromFile ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—ñ–≤             |
| `parallelForkPMITests`      | PER\_METHOD Inline ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ (forks), –¥–∞–Ω—ñ –≤ –∫–æ–¥—ñ        |
| `parallelForkPMFTests`      | PER\_METHOD FromFile ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ (forks), –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—ñ–≤    |
| `parallelForkPCITests`      | PER\_CLASS Inline ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ (forks), –¥–∞–Ω—ñ –≤ –∫–æ–¥—ñ         |
| `parallelForkPCFTests`      | PER\_CLASS FromFile ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ (forks), –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—ñ–≤     |
| `parallelConcurrentIlTests` | CONCURRENT Inline ‚Äî @Execution(CONCURRENT), –¥–∞–Ω—ñ –≤ –∫–æ–¥—ñ     |
| `parallelConcurrentFFTests` | CONCURRENT FromFile ‚Äî @Execution(CONCURRENT), –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—ñ–≤ |

> ‚ö†Ô∏è –£—Å—ñ —Ç–∞—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ª–∏—à–µ –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `tests`

---

## üìä –†–æ–±–æ—Ç–∞ –∑ Allure

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç—ñ–≤:

* –ó–≤—ñ—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É `build/allure-report`
* Web-—Å–µ—Ä–≤–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î –∑–≤—ñ—Ç –Ω–∞ `http://localhost:8080`
* –î–æ—Å—Ç—É–ø –¥–æ Allure Report –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:

```
http://localhost:8080
```

---

## üìé –ü—Ä–∏–º—ñ—Ç–∫–∏

* –ü—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É Grid –≤—Ä—É—á–Ω—É (–±–µ–∑ compose) —É—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤ –æ–¥–Ω—ñ–π –º–µ—Ä–µ–∂—ñ `selenium-grid-net` (–Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
* –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è —É –≤–∏–¥—ñ–ª–µ–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ–º—É –¥–æ —Ç—ñ—î—ó –∂ –º–µ—Ä–µ–∂—ñ, —â–æ —ñ Grid

